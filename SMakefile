# -*-Makefile-*- for building GNU make with smake
#
# NOTE: If you have no 'make' program at all to process this makefile,
# run 'build.sh' instead.
#
# Copyright (C) 1995-2017 Free Software Foundation, Inc.
# This file is part of GNU Make.
#
# GNU Make is free software; you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free Software
# Foundation; either version 3 of the License, or (at your option) any later
# version.
#
# GNU Make is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
# details.
#
# You should have received a copy of the GNU General Public License along with
# this program.  If not, see <http://www.gnu.org/licenses/>.

#
#	Makefile for GNU Make
#

# Ultrix 2.2 make doesn't expand the value of VPATH.
VPATH = /make-4.2.1+dbg-1.4/
# This must repeat the value, because configure will remove 'VPATH = .'.
srcdir = /make-4.2.1+dbg-1.4/

CC = sc
RM = delete
MAKE = smake

CFLAGS =
CPPFLAGS =
LDFLAGS =

# Define these for your system as follows:
#	-DNO_ARCHIVES		To disable 'ar' archive support.
#	-DENUM_BITFIELDS	If the compiler isn't GCC but groks enum foo:2.
#				Some compilers apparently accept this
#				without complaint but produce losing code,
#				so beware.
# NeXT 1.0a uses an old version of GCC, which required -D__inline=inline.
# See also 'config.h'.
defines =

# Which flavor of remote job execution support to use.
# The code is found in 'remote-$(REMOTE).c'.
REMOTE = stub

# If you are using the GNU C library, or have the GNU getopt functions in
# your C library, you can comment these out.
GETOPT = getopt.o getopt1.o
GETOPT_SRC = $(srcdir)getopt.c $(srcdir)getopt1.c $(srcdir)getopt.h

# If you are using the GNU C library, or have the GNU glob functions in
# your C library, you can comment this out.  GNU make uses special hooks
# into the glob functions to be more efficient (by using make's directory
# cache for globbing), so you must use the GNU functions even if your
# system's C library has the 1003.2 glob functions already.  Also, the glob
# functions in the AIX and HPUX C libraries are said to be buggy.
GLOB = Lib glob/glob.lib

# If your system doesn't have alloca, or the one provided is bad, define this.
ALLOCA = alloca.o
ALLOCA_SRC = $(srcdir)alloca.c

# If your system needs extra libraries loaded in, define them here.
# System V probably need -lPW for alloca.  HP-UX 7.0's alloca in
# libPW.a is broken on HP9000s300 and HP9000s400 machines.  Use
# alloca.c instead on those machines.
LOADLIBES =

# Any extra object files your system needs.
extras = amiga.o

# Common prefix for machine-independent installed files.
prefix =
# Common prefix for machine-dependent installed files.
exec_prefix =

# Directory to install 'make' in.
bindir = sc:c
# Directory to find libraries in for '-lXXX'.
libdir = lib:
# Directory to search by default for included makefiles.
includedir = include:
# Directory to install the Info files in.
infodir = doc:
# Directory to install the man page in.
mandir = t:
# Number to put on the man page filename.
manext = 1
# Prefix to put on installed 'make' binary file name.
binprefix =
# Prefix to put on installed 'make' man page file name.
manprefix = $(binprefix)

# Whether or not make needs to be installed setgid.
# The value should be either 'true' or 'false'.
# On many systems, the getloadavg function (used to implement the '-l'
# switch) will not work unless make is installed setgid kmem.
install_setgid = false
# Install make setgid to this group so it can read /dev/kmem.
group = sys

# Program to install 'make'.
INSTALL_PROGRAM = copy
# Program to install the man page.
INSTALL_DATA = copy
# Generic install program.
INSTALL = copy

# Program to format Texinfo source into Info files.
MAKEINFO = makeinfo
# Program to format Texinfo source into DVI files.
TEXI2DVI = texi2dvi

# Programs to make tags files.
ETAGS = etags -w
CTAGS = ctags -w

#guile = guile.o

objs = commands.o job.o dir.o file.o misc.o main.o read.o remake.o   \
       rule.o implicit.o default.o variable.o expand.o function.o    \
       vpath.o version.o ar.o arscan.o signame.o strcache.o hash.o   \
       output.o remote-$(REMOTE).o $(GLOB) $(GETOPT) $(ALLOCA)       \
       $(extras) $(guile)

srcs = $(srcdir)commands.c $(srcdir)job.c $(srcdir)dir.c             \
       $(srcdir)file.c $(srcdir)getloadavg.c $(srcdir)misc.c         \
       $(srcdir)main.c $(srcdir)read.c $(srcdir)remake.c             \
       $(srcdir)rule.c $(srcdir)implicit.c $(srcdir)default.c        \
       $(srcdir)variable.c $(srcdir)expand.c $(srcdir)function.c     \
       $(srcdir)vpath.c $(srcdir)version.c $(srcdir)hash.c           \
       $(srcdir)guile.c $(srcdir)remote-$(REMOTE).c                  \
       $(srcdir)ar.c $(srcdir)arscan.c $(srcdir)strcache.c           \
       $(srcdir)signame.c $(srcdir)signame.h $(GETOPT_SRC)           \
       $(srcdir)commands.h $(srcdir)dep.h $(srcdir)file.h            \
       $(srcdir)job.h $(srcdir)makeint.h $(srcdir)rule.h             \
       $(srcdir)output.c $(srcdir)output.h                           \
       $(srcdir)variable.h $(ALLOCA_SRC) $(srcdir)config.h.in


.SUFFIXES:
.SUFFIXES: .o .c .h .ps .dvi .info .texinfo

all: make
info: make.info
dvi: make.dvi
# Some makes apparently use .PHONY as the default goal if it is before 'all'.
.PHONY: all check info dvi

make.info: make.texinfo
	$(MAKEINFO) -I$(srcdir) $(srcdir)make.texinfo -o make.info

make.dvi: make.texinfo
	$(TEXI2DVI) $(srcdir)make.texinfo

make.ps: make.dvi
	dvi2ps make.dvi > make.ps

make: $(objs) glob/glob.lib
	$(CC) Link $(LDFLAGS) $(objs) $(LOADLIBES) To make.new
	-delete quiet make
	rename make.new make

# -I. is needed to find config.h in the build directory.
.c.o:
	$(CC) $(defines) IDir "" IDir $(srcdir)glob \
	      $(CPPFLAGS) $(CFLAGS) $< $(OUTPUT_OPTION)

glob/glob.lib:
	execute <<
	    cd glob
	    smake
<

tagsrcs = $(srcs) $(srcdir)remote-*.c
TAGS: $(tagsrcs)
	$(ETAGS) $(tagsrcs)
tags: $(tagsrcs)
	$(CTAGS) $(tagsrcs)

.PHONY: install installdirs
install:
	copy make sc:c

loadavg: loadavg.c config.h
	$(CC) $(defines) -DTEST -I. -I$(srcdir) $(CFLAGS) $(LDFLAGS) \
	      loadavg.c $(LOADLIBES) -o $@

clean: glob-clean
	-$(RM) -f make loadavg *.o core make.dvi

distclean: clean glob-realclean
	-$(RM) -f Makefile config.h config.status build.sh
	-$(RM) -f config.log config.cache
	-$(RM) -f TAGS tags
	-$(RM) -f make.?? make.??s make.log make.toc make.*aux
	-$(RM) -f loadavg.c

realclean: distclean
	-$(RM) -f make.info*

mostlyclean: clean

.PHONY: glob-clean glob-realclean

glob-clean glob-realclean:
	execute <<
	cd glob
	smake $@
<

# --------------- DEPENDENCIES
#

# .deps/alloca.Po
# dummy

# .deps/alloc.Po
../alloc.o: ../alloc.c ../makeint.h \
 ../config.h \
 ../gnuremake.h \
 ../getopt.h \
 ../gettext.h \

# .deps/ar.Po
ar.o: ar.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h dep.h

# .deps/arscan.Po
arscan.o: arscan.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \

# .deps/buildargv.Po
buildargv.o: buildargv.c \
 buildargv.h

# .deps/commands.Po
commands.o: commands.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h dep.h variable.h job.h output.h \
 trace.h \
 commands.h expand.h

# .deps/debug.Po
debug.o: debug.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 make.h \
 debug.h types.h config.h \
 print.h variable.h hash.h \
 job.h output.h trace.h filedef.h \

# .deps/default.Po
default.o: default.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h \
 variable.h rule.h dep.h job.h output.h trace.h \
 commands.h

# .deps/dir.Po
dir.o: dir.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 hash.h \
 filedef.h types.h config.h make.h dep.h \

# .deps/expand.Po
expand.o: expand.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h job.h \
 output.h trace.h \
 commands.h variable.h rule.h

# .deps/file_basic.Po
../file_basic.o: ../file_basic.c ../makeint.h \
 ../config.h \
 ../gnuremake.h \
 ../getopt.h \
 ../gettext.h \
 ../filedef.h ../hash.h ../types.h ../config.h \
 ../make.h ../file.h ../dep.h ../job.h ../output.h ../trace.h \
 ../commands.h ../variable.h \
 ../debug.h \

# .deps/file.Po
file.o: file.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 file_basic.h filedef.h hash.h types.h config.h make.h \
 file.h dep.h job.h output.h trace.h \
 commands.h variable.h \
 debug.h \

# .deps/function.Po
function.o: function.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h expand.h variable.h dep.h job.h \
 output.h trace.h \
 commands.h debug.h \
 debugger/cmd.h \
 debugger/../job.h debugger/../buildargv.h debugger/../trace.h

# .deps/getloadavg.Po
# dummy

# .deps/getopt1.Po
getopt1.o: getopt1.c config.h getopt.h \

# .deps/getopt.Po
getopt.o: getopt.c config.h \

# .deps/globals.Po
../globals.o: ../globals.c ../types.h \
 ../config.h ../make.h ../config.h \
 ../getopt.h \
 ../gettext.h \
 ../globals.h ../variable.h \
 ../gnuremake.h ../hash.h

# .deps/guile.Po
guile.o: guile.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 debug.h types.h config.h make.h \
 filedef.h hash.h dep.h \
 variable.h \
 gmk-default.h

# .deps/hash.Po
hash.o: hash.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 hash.h

# .deps/implicit.Po
implicit.o: implicit.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h rule.h dep.h debug.h \
 variable.h job.h output.h \
 trace.h \
 commands.h

# .deps/job.Po
job.o: job.c types.h config.h make.h config.h \
 getopt.h \
 gettext.h \
 makeint.h gnuremake.h \
 globals.h variable.h hash.h debugger/cmd.h \
 debugger/../job.h debugger/../output.h debugger/../trace.h \
 debugger/../types.h debugger/../filedef.h debugger/../hash.h \
 debugger/../gnuremake.h \
 debugger/../buildargv.h \
 debugger/../trace.h job.h print.h trace.h debug.h \
 filedef.h commands.h os.h \

# .deps/loadapi.Po
loadapi.o: loadapi.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h variable.h dep.h

# .deps/loadavg-getloadavg.Po
loadavg-getloadavg.o: getloadavg.c config.h \
 makeint.h gnuremake.h \
 getopt.h \
 gettext.h \

# .deps/load.Po
load.o: load.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 debug.h \
 types.h config.h make.h \
 filedef.h hash.h variable.h

# .deps/main.Po
main.o: main.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 globals.h types.h config.h make.h variable.h hash.h profile.h filedef.h \
 os.h dep.h job.h output.h trace.h \
 commands.h rule.h debug.h \
 getopt.h \

# .deps/misc.Po
misc.o: misc.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h dep.h debug.h \

# .deps/mock.Po
../mock.o: ../mock.c ../mock.h \
 ../debug.h ../types.h \
 ../config.h ../make.h ../config.h \
 ../getopt.h \
 ../gettext.h \
 ../debugger.h ../trace.h \
 ../filedef.h ../hash.h ../gnuremake.h

# .deps/output.Po
output.o: output.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 globals.h types.h config.h make.h variable.h hash.h job.h output.h \
 trace.h filedef.h \

# .deps/posixos.Po
posixos.o: posixos.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 debug.h types.h config.h \
 make.h \
 job.h output.h trace.h \
 filedef.h hash.h os.h

# .deps/print.Po
print.o: print.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 make.h \
 main.h commands.h filedef.h hash.h types.h config.h trace.h \
 debugger/cmd.h debugger/../job.h debugger/../output.h \
 debugger/../trace.h \
 debugger/../buildargv.h \
 debugger/../trace.h debug.h \
 dep.h read.h print.h \
 variable.h job.h

# .deps/profile.Po
profile.o: profile.c \
 getopt.h \
 profile.h filedef.h hash.h \
 gnuremake.h types.h config.h \
 make.h config.h \
 gettext.h \

# .deps/read.Po
read.o: read.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 globals.h types.h config.h make.h variable.h hash.h debugger/cmd.h \
 debugger/../job.h debugger/../output.h debugger/../trace.h \
 debugger/../types.h debugger/../filedef.h debugger/../hash.h \
 debugger/../gnuremake.h \
 debugger/../buildargv.h \
 debugger/../trace.h filedef.h dep.h job.h \
 commands.h trace.h rule.h debug.h \

# .deps/remake.Po
remake.o: remake.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 globals.h types.h config.h make.h variable.h hash.h profile.h filedef.h \
 debugger/cmd.h debugger/../job.h debugger/../output.h \
 debugger/../trace.h debugger/../types.h debugger/../filedef.h \
 debugger/../buildargv.h \
 debugger/../trace.h job.h commands.h trace.h dep.h debug.h \

# .deps/remote-cstms.Po
# dummy

# .deps/remote-stub.Po
remote-stub.o: remote-stub.c makeint.h \
 config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h job.h output.h trace.h \
 commands.h

# .deps/rule.Po
rule.o: rule.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h dep.h \
 job.h output.h trace.h \
 commands.h variable.h rule.h

# .deps/signame.Po
signame.o: signame.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \

# .deps/strcache.Po
strcache.o: strcache.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 hash.h

# .deps/trace.Po
trace.o: trace.c config.h trace.h types.h \
 make.h config.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h \
 gnuremake.h print.h variable.h job.h output.h \
 debug.h \
 debugger/cmd.h \
 debugger/../job.h debugger/../buildargv.h debugger/../trace.h

# .deps/variable.Po
variable.o: variable.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h dep.h \
 job.h output.h trace.h \
 commands.h variable.h rule.h \
 main.h

# .deps/version.Po
version.o: version.c config.h

# .deps/vpath.Po
vpath.o: vpath.c makeint.h config.h \
 gnuremake.h \
 getopt.h \
 gettext.h \
 filedef.h hash.h types.h config.h make.h variable.h
